---
# @see https://blog.stephane-robert.info/docs/infra-as-code/gestion-de-configuration/ansible/modules/packages/

- name: Install standard Linux packages
  become: true
  ansible.builtin.package:
    name:
      # If a tool is supported by asdf, prefer installing it using asdf because it allows to always use the latest
      # version.
      - apt-file
      - apt-transport-https
      - autoconf
      - automake
      - bash-completion
      - bison              # Linux Kernel compilation
      - build-essential
      - ca-certificates
      - cargo
      - clang
      - cmake
      - cpu-checker
      - cups
      - curl
      - devscripts         # Linux Kernel compilation
      - dunst              # Lightweight notification daemon
      - fakeroot           # Linux Kernel compilation
      - feh                # Lightweight image viewer
      - flex               # Linux Kernel compilation
      - g++
      - gcc
      - git
      - git-secrets        # Prevents you from committing secrets and credentials into git repositories
      - gnupg
      - groff
      - guestfs-tools
      - gvfs-backends      # Required for Thunar trash, removable media and remote file systems support
      - gvfs-fuse          # Required for Thunar trash, removable media and remote file systems support
      - hwinfo
      - libarchive-tools
      - libelf-dev         # Linux kernel compilation
      - libfontconfig1-dev
      - libnotify-bin      # For the 'notify-send' command
      - libnss3-tools      # Required by the 'mkcert' tool
      - libosinfo-bin
      - libssl-dev         # Linux kernel compilation
      - libudev-dev
      - libusb-1.0-0-dev
      - libvirt-daemon-system
      - libxcb-xfixes0-dev
      - libxkbcommon-dev
      - libyaml-dev
      - lshw               # HardWare Lister for Linux
      - make
      - meson
      - nasm               # Required for FFMpeg (installed with asdf)
      - network-manager
      - openssl
      - ovmf
      - pgpdump
      - pkg-config
      - podman
      - printer-driver-all
      - psmisc             # Required for the 'killall' command for example
      - python3-pip
      - qemu-system-x86
      - qemu-utils
      - rsync
      - shfmt
      - swtpm
      - texlive-full          # LaTeX distribution
      - tuned
      - unzip
      - vagrant
      - virt-manager
      - virt-viewer
      - virtinst
      - wget
      - zip
    state: latest


########################################################################################################################
# audio
########################################################################################################################
- name: Install 'audio' Linux packages
  become: true
  ansible.builtin.package:
    name:
      - alsa-utils
  when: audio | default(false)
#- name: Install 'audio AND gui' Linux packages
#  become: true
#  ansible.builtin.package:
#    name:
#      #- spotify-client       # FIXME: Needs a custom apt repository
#  when: audio | default(false)


########################################################################################################################
# mail
########################################################################################################################
- name: Install 'mail' Linux packages
  become: true
  ansible.builtin.package:
    name:
      - libmailutils-dev   # Required to have the 'mailutils' command
      - mailutils
      - mailutils-imap4d
  when: mail | default(false)
- name: Install 'mail AND gui' Linux packages
  become: true
  ansible.builtin.package:
    name:
      - thunderbird
  when: mail and gui | default(false)


########################################################################################################################
# video
########################################################################################################################
- name: Install 'video AND gui' Linux packages
  become: true
  ansible.builtin.package:
    name:
      - vlc
  when: video and gui | default(false)


- name: Install 'gui' Linux packages
  become: true
  ansible.builtin.package:
    name:
      #- bruno             # FIXME: Needs custom apt repository
      - calibre
      #- dbeaver-ce        # FIXME: Install it using custom package
      - evince
      - gparted
      - libreoffice
      - peek
      - ristretto             # XFCE image viewer
      - thunar                # XFCE file manager
      - thunar-archive-plugin # Archive support for Thunar
      #- thunar-dropbox-plugin # Dropbox support for Thunar FIXME: Requires the 'contrib' Debian repo
      - wl-clipboard
      - xclip
      - xsel
  when: gui | default(false)
