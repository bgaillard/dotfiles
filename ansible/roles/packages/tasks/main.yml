---
# @see https://blog.stephane-robert.info/docs/infra-as-code/gestion-de-configuration/ansible/modules/packages/

# FIXME: Indiquer que le stockage minimum nécessaire pour la totalité est d'au moins 30 Go

# FIXME: La configuration de 'mise' doit vraiment être installée avec Ansible car le provisioning doit être fait avant
#        l'installation des dotfiles
#
# FIXME: Le fichier 'provision.sh' doit installer le paquets indispensables à chezmoi ainsi qu'à Ansible
#        Du coup il faut un provisioning Ansible via une commande 'ansible-playbook' à exécuter à la main

- name: Install standard Linux packages
  become: true
  ansible.builtin.package:
    name:
      # If a tool is supported by asdf, prefer installing it using asdf because it allows to always use the latest
      # version.
      - alsa-utils
      - apt-file
      - apt-transport-https
      - autoconf
      - automake
      - bash-completion
      - bison              # Linux Kernel compilation
      - build-essential
      - ca-certificates
      - cargo
      - clang
      - cmake
      - cpu-checker
      - cups
      - curl
      - devscripts         # Linux Kernel compilation
      - dunst              # Lightweight notification daemon
      - fakeroot           # Linux Kernel compilation
      - feh                # Lightweight image viewer
      - flex               # Linux Kernel compilation
      - g++
      - gcc
      - git
      - git-secrets        # Prevents you from committing secrets and credentials into git repositories
      - gnupg
      - groff
      - guestfs-tools
      - gvfs-backends      # Required for Thunar trash, removable media and remote file systems support
      - gvfs-fuse          # Required for Thunar trash, removable media and remote file systems support
      - hwinfo
      - libarchive-tools
      - libelf-dev         # Linux kernel compilation
      - libfontconfig1-dev
      - libmailutils-dev   # Required to have the 'mailutils' command
      - libnotify-bin      # For the 'notify-send' command
      - libnss3-tools      # Required by the 'mkcert' tool
      - libosinfo-bin
      - libssl-dev         # Linux kernel compilation
      - libudev-dev
      - libusb-1.0-0-dev
      - libvirt-daemon-system
      - libxcb-xfixes0-dev
      - libxkbcommon-dev
      - lshw               # HardWare Lister for Linux
      - mailutils
      - mailutils-imap4d
      - make
      - meson
      - nasm               # Required for FFMpeg (installed with asdf)
      - network-manager
      - openssl
      - ovmf
      - pgpdump
      - pkg-config
      - podman
      - printer-driver-all
      - psmisc             # Required for the 'killall' command for example
      - python3-pip
      - qemu-system-x86
      - qemu-utils
      - rsync
      - shfmt
      - swtpm
      - texlive-full          # LaTeX distribution
      - thunderbird
      - tuned
      - unzip
      - vagrant
      - virt-manager
      - virt-viewer
      - virtinst
      - vlc
      - wget
      - wl-clipboard
      - xclip
      - xsel
      - zip
    state: latest

- name: Install 'gui' Linux packages
  become: true
  ansible.builtin.package:
    name:
      #- bruno             # FIXME: Needs custom apt repository
      - calibre
      #- dbeaver-ce        # FIXME: Install it using custom package
      - evince
      - gparted
      - libreoffice
      - peek
      - ristretto             # XFCE image viewer
      #- spotify-client       # FIXME: Needs a custom apt repository
      - thunar                # XFCE file manager
      - thunar-archive-plugin # Archive support for Thunar
      #- thunar-dropbox-plugin # Dropbox support for Thunar FIXME: Requires the 'contrib' Debian repo
  when: gui | default(false)
